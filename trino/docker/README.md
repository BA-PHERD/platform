# Docker Deployment

Trino has a server and a CLI, used for the CDC process that moves data from the kafka storage to Minio.

## Requirements

The images require:

- The `rootCA.crt` file, which is generated by following the instructions in `trino/https/README.md`. This is necessary only for the server image, at least in development mode.
- [**Server only**] The `trino-ranger-plugin` folder with all the dependencies of trino plugin for ranger. Read `trino/plugins/ranger/README.md`.
- [**Server only**] The `trino-anonymization-udfs-1.0` folder with all the dependencies for the custom udfs. To generate it, run:
    ```bash
    cd trino/plugins/anonymization-udfs
    make
    ```
    After the compilation, you should see a `target/trino-anonymization-udfs-1.0` folder. Copy it in the `trino/docker/server` folder.

---

## Extra (NOT REQUIRED)

In order to build Trino container, you need to locally build it from the `master`.

- Build it locally with Maven and Java 22.0.0+. I have used Java 23 (build 23+37-2369)

    ```bash
    cd {trino-repo}
    ./mvnw clean install -DskipTests
    ```

- Run the Docker build

    ```bash
    cd ./core/docker
    ./build.sh
    ```

The resulting image will be: `trino:{TRINO_VERSION}-SNAPSHOT-{ARCH}`.
